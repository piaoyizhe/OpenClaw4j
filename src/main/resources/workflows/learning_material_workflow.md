# 学习资料处理工作流

## Description
本工作流用于自动处理./file/learning目录中的学习资料，包括知识提取、智能分类和归档存储。

## 文件系统架构
- ./file/desktop - 临时文件目录，支持自动清理
- ./file/learning - 待学习资料目录
- ./file/document - 已处理资料归档目录（按类别分类）
- ./file/recycle - 回收站目录

## Tools
可用工具：
- read_file: 读取文件内容
- write_file: 写入文件内容
- delete_file: 删除文件
- list_files: 列出目录文件
- create_directory: 创建目录
- recognize_image: 使用视觉模型识别图片内容（GLM-4.6V）

## 工作流程

### 步骤1：扫描学习资料目录
扫描./file/learning目录，获取所有待处理的文件列表。

### 步骤2：读取文件内容
对每个文件进行内容读取：
- 文档类（docx、doc、pdf、txt等）：使用文件读取工具直接读取
- 图片类（jpg、png、gif等）：调用recognize_image工具使用GLM-4.6V视觉模型识别内容

### 步骤3：知识提取
调用大模型API对文件内容进行摘要提取，提取关键信息用于后续分类和记忆存储。

### 步骤4：写入记忆
将提取的知识写入./memory/MEMORY.md文件，记录格式：
```
## 文件记录: {文件名}
- 时间: {处理时间}
- 文件名: {文件名}
- 文件路径: {文件路径}
- 内容摘要: {摘要内容}
```

### 步骤5：智能分类
调用大模型分析文件内容，将文件分类到合适的类别（如：招标文件、技术文档、会议纪要、操作手册、学习资料等）。

### 步骤6：文件归档
将处理后的文件移动到./file/document/{分类名称}/目录下。

### 步骤7：过期文件处理
对于判断为过期或无用的文件，询问用户是否移动到回收站（./file/recycle）。

## 记忆存储要求
在MEMORY.md中创建专用区域保存文件元信息，每条记录需包含：
- 文件名
- 文件路径
- 文件内容摘要（用于快速检索）
- 处理时间
- 所属分类

## 交互设计
1. 手动触发：用户输入触发词（如"处理学习资料"）启动工作流
2. 进度反馈：实时显示处理进度和结果
3. 结果报告：处理完成后提供详细的处理报告

## 注意事项
1. 支持的文件格式：docx、doc、pdf、txt、jpg、png、gif等
2. 图片识别使用GLM-4.6V视觉模型
3. 分类名称由大模型智能判断
4. 处理前确保learning目录有文件
5. 回收站文件可恢复或永久删除
